<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beat Composer</title>
    <link rel="stylesheet" href="index.css">

    <nav>
    <ul>
      <li class="backarrow"><a href="index.html"><img src="images/buttons/BackArrow.svg"></a></li>

      <li class="navhome"><a href="index.html"><img src="images/buttons/HomeButtonSquare.svg" alt="to home"></a></li>

      <li class="navbuttons">
          <a class="navmusic" href="discography.html">MUSIC</a>
          <a class="navarticles" href="articles.html">ARTICLES</a>
          <a class="navgallery" href="gallery.html">GALLERY</a>
          <a class="navabout" href="about.html">ABOUT</a>
      </li>
    </ul>
</nav>
<style>

body {
      background-color: rgb(65, 154, 255);
      font-family: 'Avenir', sans-serif;
      margin: 0;
    }

 /* Button container styles */
 .button-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      justify-items: center;
      align-items: center;
      text-align: center;
      gap: 10px;
      margin:200px 20px 200px 20px;
    }

    .button-container img {
      width: 300px;
    }

    .sound-button {
      background: none;
      border: none;
      cursor: pointer;
      outline: none;
    }

    .sound-button img {
      width: 50px;
      height: 50px;
      transition: filter 0.3s;
    }

    .sound-button.inverted img {
      filter: invert(100%);
      
    }

    .sound-button:active {
      transform: scale(1.05);
      
    }





</style>

</head>
<body>
<div class="pagecontainer">

  <h1>ùÑû Beat Composer ‚ô´</h1>
  <p>Press play to start sound ‚ô™. Toggle sound with buttons. Press pause to stop sound. Refresh to start again.‚ãÜ.Àö‚ô¨‚ãÜ.Àö</p>

  <div class="button-container">
    <button id="play" class="sound-button"><img src="images/buttons/play.png" alt="Play All Sounds"></button>
    <button id="stop" class="sound-button"><img src="images/buttons/stop.png" alt="Stop All Sounds"></button>
    <button id="toggle1" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 1"></button>
    <button id="toggle2" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 2"></button>
    <button id="toggle3" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 3"></button>
    <button id="toggle4" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 4"></button>
    <button id="toggle5" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 5"></button>
    <button id="toggle6" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 6"></button>
    <button id="toggle7" class="sound-button"><img src="images/buttons/vp-button.png" alt="Toggle Sound 7"></button>
  </div>

</div>


<!-- JavaScript for audio -->
  <script>
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const gainNodes = [];
    const audioSources = [];
    const audioUrls = [
      'beats/Backyard.wav',
      'beats/Bass.wav',
      'beats/Clap.wav',
      'beats/Knob.wav',
      'beats/Lead.wav',
      'beats/Metallic.wav',
      'beats/Rhodes 1.wav'
    ];

    async function loadAudio(url) {
      const response = await fetch(url);
      const arrayBuffer = await response.arrayBuffer();
      return await audioContext.decodeAudioData(arrayBuffer);
    }

    async function setupSounds(audioUrls) {
      const buffers = await Promise.all(audioUrls.map(url => loadAudio(url)));

      buffers.forEach(buffer => {
        const source = audioContext.createBufferSource();
        source.buffer = buffer;
        source.loop = true;

        const gainNode = audioContext.createGain();
        gainNode.gain.value = 1;
        source.connect(gainNode).connect(audioContext.destination);

        gainNodes.push(gainNode);
        audioSources.push(source);
      });
    }

    function playAllSounds() {
      audioSources.forEach((source, index) => {
        if (source.playbackState === audioContext.PLAYING_STATE) {
          source.start();
        } else {
          console.error("source.playbackState != audioContext.PLAYING_STATE on index: " + index);
        }
      });
    }

    function stopAllSounds() {
      audioSources.forEach(source => {
        if (source.playbackState === audioContext.PLAYING_STATE) {
          source.stop();
        }
      });
    }

    function toggleSound(index) {
      const gainNode = gainNodes[index];
      gainNode.gain.value = gainNode.gain.value === 0 ? 1 : 0;
      document.getElementById(`toggle${index + 1}`).classList.toggle('inverted');
    }

   

    setupSounds(audioUrls);

    document.getElementById('play').addEventListener('click', playAllSounds);
    document.getElementById('stop').addEventListener('click', stopAllSounds);
    document.getElementById('toggle1').addEventListener('click', () => toggleSound(0));
    document.getElementById('toggle2').addEventListener('click', () => toggleSound(1));
    document.getElementById('toggle3').addEventListener('click', () => toggleSound(2));
    document.getElementById('toggle4').addEventListener('click', () => toggleSound(3));
    document.getElementById('toggle5').addEventListener('click', () => toggleSound(4));
    document.getElementById('toggle6').addEventListener('click', () => toggleSound(5));
    document.getElementById('toggle7').addEventListener('click', () => toggleSound(6));
  </script>

  



<div class="footer">
    <div class="row">
        <div class="col">
            <div class="col-content">
                <h1 class="footer-title">Civic Engagement</h1> <br>
                <h2 class="footer-subtitle"><a href="civicengagementwec@gmail.com">Contact Us</a></h2>
            </div>
        </div>

        <div class="col">
            <div class="col-content">
                <h1 class="footer-title"><a href="music.html">Music</a></h1>
                <h2 class="footer-subtitle"><a href="discography.html">Discography</a></h2>
                <h2 class="footer-subtitle"><a href="beatmaker.html">Beat Composer</a></h2>
                <h2 class="footer-subtitle"><a href="radio.html">Radio</a></h2>
            </div>
            
        </div>

        <div class="col">
            <div class="col-content">
                <h1 class="footer-title"><a href="articles.html">Articles</a></h1>
                <h2 class="footer-subtitle"><a href="catelog.html">Catelog</a></h2>
            </div>
        </div>

        <div class="col">
            <div class="col-content">
                <h1 class="footer-title"><a href="gallery.html">Gallery</a></h1>
                <h2 class="footer-subtitle"><a href="browse.html">Browse</a></h2>
                <h2 class="footer-subtitle"><a href="theather.html">Theater</a></h2>
                <h2 class="footer-subtitle"><a href="vault.html">Vault</a></h2>
            </div>
        </div>

        <div class="col">
            <div class="col-content">
                <h1 class="footer-title"><a href="about.html">About</a></h1>
                <h2 class="footer-subtitle"><a href="contact.html">Contact</a></h2>
                <h2 class="footer-subtitle"><a href="devlog.html">Dev Log</a></h2>
            </div>
        </div>
    </div>
    
    <div class="footer-subsubtitle">
        <h3>Copyright &copy Civic Engagement 2025<br>Website by Natalie Rosenstrom &#10044<br>
            <a href="index.html">
                <img src="images/buttons/vp-button.png" alt="to home" style= "width:70px; border:none;">
            </a>
            </h3>
    </div>
</div>
</body>
</html>